<html>

<link rel="stylesheet" type="text/css" href="../turtlegui.css"/>
<style>


</style>

<script src="../turtlegui.js"></script>

<script>

// Controller code / state
var data = {
    ingredients: [
        {name: "Flour", amount: 4},
        {name: "Butter", amount: 1},
        {name: "Eggs", amount: 2},
        {name: "Vanilla", amount: 1},
        {name: "Apple", amount: 4}
    ]
} 

var recipe = {
    new_ingredient: {
        name: null
    },
    add_ingredient: function() {
        data.ingredients[data.ingredients.length] = {
            name: recipe.new_ingredient.name,
            amount: 1
        };
        recipe.new_ingredient.name = null;
        turtlegui.reload();
    },
    remove_ingredient: function(ingredient) {
        data.ingredients.splice(data.ingredients.indexOf(ingredient), 1);
        turtlegui.reload();
    }
}

document.addEventListener("DOMContentLoaded", function(){
    // call turtlegui.reload() when the page loads 
    turtlegui.reload();
});

</script>

<body>

<label>Our main list - alter amounts in text boxes:</label>
<div gui-list="data.ingredients" gui-item="ingredient">
    <label gui-text="ingredient.name"></label>
    <input type="text" gui-val="ingredient.amount" gui-change="turtlegui.reload()"></input>
    <input type="button" gui-click="recipe.remove_ingredient(ingredient)" value="Remove"></input>
    <br/>
</div>

<hr/>

<label>Add Ingredient to the list, and update</label>
<br/>
<input type="text" gui-val="recipe.new_ingredient.name"></input>
<input type="button" gui-click="recipe.add_ingredient()" value="Add"></input>

<hr/>

<label>Echoing list one more time in slightly different format:</label>
<div gui-list="data.ingredients" gui-item="ingredient">
    <span gui-text="ingredient.amount"></span>
    <span> spoons of </span>
    <span gui-text="ingredient.name"></span>
    <br/>
</div>


</body>
